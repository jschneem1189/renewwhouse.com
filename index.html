<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="initial-scale=1.0,width=device-width,user-scalable=yes" />
  <title>ReNEWW</title>
  <script src="libraries/jquery-1.9.1.js"></script>
  <script src="libraries/raphael.js"></script>
  <script src="components/pie.js"></script>
  <script src="components/popup.js"></script>
  <script src="components/AnimatedButton.js"></script>
  <script src="libraries/stellar.js"></script>
  <script src="libraries/modernizr.custom.46375.js"></script>
  <link rel="shortcut icon" href="images/32x32 logo.ico">
  <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Oswald">
  <link href='http://fonts.googleapis.com/css?family=Lora' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Duru+Sans' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" type="text/css" media="screen" href="css/index.css" />
  <link rel="stylesheet" type="text/css" media="screen and (min-width: 651px) and (max-width: 1000px)" href="css/index650.css" />
  <link rel="stylesheet" type="text/css" media="screen and (min-width:321px) and (max-width: 650px)" href="css/index650.css" />
  <link rel="stylesheet" type="text/css" media="screen and (max-width: 320px)" href="css/index320.css" />
  <link rel="stylesheet" type="text/css" media="screen and (max-height: 320px)" href="css/index320_landscape.css" />
  <script>
    // init
    $(function(){
        // var R1 = Raphael("dataButton", 80, 30);
        // var R2 = Raphael("tourButton", 80, 30);
        var R3 = Raphael("aboutButton", 80, 30);
        var R4 = Raphael("partnerButton", 90, 30);
        // var dataButton = new AnimatedButton(R1, "DATA", 80, 30);
        // var tourButton = new AnimatedButton(R2, "TOUR", 80, 30);
        this.aboutButton = new AnimatedButton(R3, "ABOUT", 80, 30);
        this.partnerButton = new AnimatedButton(R4, "PARTNERS", 90, 30);
      }.bind(this));

    this.viewportHeight = $(window).height();
    this.viewportWidth = $(window).width();
    this.goldenRatio = 1.6;
    // this.goldenRatio = jQuery('#homeBanner').css('background-size').width() / jQuery('#homeBanner').css('background-image').height();
    var ratio = this.viewportWidth/this.viewportHeight;
    this.offset = 0;
    if (ratio > this.goldenRatio) {
      this.offset = (this.viewportWidth/this.goldenRatio - this.viewportHeight)* 1/2;
    }

    this.scrollBanner = function() {
      //Get the scoll position of the page
      var scrollPos = jQuery(this).scrollTop();

      //Scroll and fade out the banner text
      jQuery('#bannerText').css({
        'margin-top' : -(scrollPos/3)+"px",
        'opacity' : 1-(scrollPos/300)
      });
    
      //Scroll the background of the banner
      var val = -this.offset + (-scrollPos/8)
      jQuery('#homeBanner').css({
        'background-position' : 'center ' + val +'px'
      });    
    }.bind(this)

    this.resetPosition = function() {
      var ratio = this.viewportWidth/this.viewportHeight;
      this.offset = 0;
      if (ratio > this.goldenRatio) {
        this.offset = (this.viewportWidth/this.goldenRatio - this.viewportHeight)* 1/2;
      }

      // offset the content such that just the tab peeks at the bottom
      var missionOffset = parseInt($('#mission').css("top").split("px")[0],10) + $('#tab').height();
      $('#content').css("margin-top", parseInt(this.viewportHeight-missionOffset,10));
      // ensure that the bkg image is the proper height
      $('#homeBanner').css("bottom", missionOffset + "px");

      // if (ratio > this.goldenRatio) {
      //   jQuery('#homeBanner').css({
      //     'background-size' : this.viewportWidth + 'px ' + this.viewportWidth/this.goldenRatio + 'px'
      //   });
      // } else {
      //   jQuery('#homeBanner').css({
      //     'background-size' : this.viewportHeight*this.goldenRatio + 'px ' + this.viewportHeight + 'px'
      //   });
      // }
    }.bind(this)

    window.onresize = function(evt) {
      this.viewportHeight = $(window).height();
      this.viewportWidth = $(window).width();
      
      this.resetPosition();

      if (!Modernizr.touch) {
        this.scrollBanner();
      }
    }.bind(this);

    $(window).load(function(evt) {

        this.viewportHeight = $(window).height();
        this.viewportWidth = $(window).width();

        // this.resetPosition();
        
        $('#wrapper').show();

        // important to call this after showing the wrapper of the tab image won't have a height
        this.resetPosition();
        // get the bg image in the correct position
        this.scrollBanner();
    }.bind(this));

    $(window).unload(function(evt) {
        // for some reason if this function is not implemented the AnimatedButtons get stuck when using the back button in Safari
        this.partnerButton.reset();
        this.aboutButton.reset();
    }.bind(this));

    
    if (Modernizr.touch) {
      $('#homeBanner').css('position','absolute');
    } else {
      $('#homeBanner').css('position','fixed');
    }

    // var is_touch_device = 'ontouchstart' in document.documentElement;
    $(window).scroll(function() {
        if (!Modernizr.touch) {
          scrollBanner();
        }
        // document.getElementById('content').style.display = 'none';
        // document.getElementById('content').style.display = 'block';    
    });

  </script>
</head>
<body>
  <div id="wrapper" style="display:none">
    <div>
      <div id="homeBanner">
        <div id="bannerText" >
          <h1>welcome to the</h1>
          <h2><span style="color:#73be44">Re</span>NEWW <span id="houseText">HOUSE</span></h2>
        </div>    
      </div> 
    </div> 

    <div id="unsupportedBrowser">
      We noticed that you are on a currently unsupported browser.<br>To enjoy a better user experience, please switch to one of the following web browsers:<br>- Chrome vX.X+<br>- Firefox vX.X+<br>- Safari vX.X+<br>- Internet Explorer vX.X+<br><br>(Click anywhere to dismiss)
    </div>

    <div id="content" style="">
      <img src="images/tab.png" id="tab" />
      <div id="mission">
        <img id="houseLogo" src="images/houselogo_small.png" />
        <div style="display:table; height:100%; width:100%;">
          <div class="quoteWrapper">
            <img class="quotes" id="openQuote" src="images/openQuote.png"</img>
          </div>
          <p>Our mission is to transform an existing home into a world-class research laboratory and sustainable living showcase with the goal of enabling sustainable living for customers and sustainable technologies for our partners.</p>
          <div class="quoteWrapper">
            <img class="quotes" src="images/closeQuote.png"</img>
          </div>
        </div>
        <div id="readMore">
          <img style="width:30px; height: 30px;"src="images/magnifying glass.png" />
          <h2>Read more in <a style="color:#73be44; text-decoration: none;" href="about.html">About.</a></h2>
        </div>
        <h3><span id="acronymText" style="color:#73be44">Re</span>trofit <span id="acronymText">N</span>et Zero: <span id="acronymText">E</span>nergy. <span id="acronymText">W</span>ater. <span id="acronymText">W</span>aste.</h3>
      </div>
      <div style="text-align:center; position:relative; padding:20px 0px 150px 0px">
        <div class="image">
          <img src="images/light.jpg" />
          <h3>ENERGY</h3>
        </div>
        <div class="image" >
          <img src="images/water.jpg" />
          <h3>WATER</h3>
        </div>
        <div class="image">
          <img src="images/waste.jpg" />
          <h3>WASTE</h3>
        </div>
      </div>
      <p id="copyright">Â© 2014 Whirlpool Corporation. Web Design & Development by <a href="http://www.thomasbottonari.com">thomasbottonari.com</a></p>
      <div id="footer">
        <div class="footerSection" id="footer1">
          <a href="https://www.google.com/maps/place/545+Hayes+Street,+West+Lafayette,+IN+47906" style="height:100%;display:block;" target="_blank"><img src="images/address.png" class="footerImage" id="contact"></a>
        </div>
        <div class="divider">
        </div>
        <div class="footerSection" id="footer2">
          <div style="display:block; position:relative; width:auto; height:100%; text-align:center;">
            <a href="mailto:ReNEWW_House@whirlpool.com" target="_top"><img src="images/email.png" class="footerImage"/></a>
            <img src="images/facebook.png" class="footerImage" />
            <img src="images/twitter.png" class="footerImage" />
          </div>
        </div>
        <div id="horizontalDivider">
        </div>
        <div class="divider">
        </div>
        <div class="footerSection" id="footer3">
          <div style="display:block; position:relative; width:auto; height:100%; text-align:center;">
            <a href="http://www.whirlpool.com" target="_blank"><img src="images/whirlpoollogo.png" class="footerImage" id="whirlpoollogo"></a>
            <a href="http://purdue.edu" target="_blank"><img src="images/purduelogo.png" class="footerImage" id="purduelogo"></a>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="mainNav" class="clearfix" style="z-index:2000;">
    <a href="index.html"><img src="images/grayhouse.png" id="homelogo"></a>
    <div id="horizontalMenu" >
      <!-- <a href="" id="dataButton" class="animatedButton"></a> -->
      <!-- <a href="" id="tourButton" class="animatedButton"></a> -->
      <a href="partners.html" id="partnerButton" class="animatedButton"></a>
      <a href="about.html" id="aboutButton" class="animatedButton"></a>
    </div>
    <img src="images/houselogo_small.png" id="hamburgerIcon" />
  </div>
    
</body>
</html>